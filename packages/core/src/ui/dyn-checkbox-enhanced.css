/* DynCheckboxEnhanced Component Styles */

.dyn-checkbox {
  display: flex;
  align-items: flex-start;
  gap: var(--dyn-spacing-2);
  cursor: pointer;
  font-family: var(--dyn-font-family-sans);
  user-select: none;
  
  &--sm {
    font-size: var(--dyn-font-size-sm);
    gap: var(--dyn-spacing-1);
  }
  
  &--md {
    font-size: var(--dyn-font-size-base);
    gap: var(--dyn-spacing-2);
  }
  
  &--lg {
    font-size: var(--dyn-font-size-lg);
    gap: var(--dyn-spacing-3);
  }
  
  &--disabled,
  &--loading {
    cursor: not-allowed;
    opacity: 0.6;
  }
  
  &--readonly {
    cursor: default;
  }
}

.dyn-checkbox__input-container {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.dyn-checkbox__input {
  position: absolute;
  opacity: 0;
  width: 100%;
  height: 100%;
  margin: 0;
  cursor: inherit;
  z-index: 1;
  
  &:focus + .dyn-checkbox__box {
    box-shadow: var(--dyn-shadow-focus);
  }
  
  &:disabled {
    cursor: not-allowed;
  }
}

.dyn-checkbox__box {
  display: flex;
  align-items: center;
  justify-content: center;
  border: 2px solid var(--dyn-color-border);
  border-radius: var(--dyn-radius-sm);
  background-color: var(--dyn-color-background);
  color: var(--dyn-color-white);
  transition: var(--dyn-transition-all);
  flex-shrink: 0;
  
  &--sm {
    width: 16px;
    height: 16px;
  }
  
  &--md {
    width: 20px;
    height: 20px;
  }
  
  &--lg {
    width: 24px;
    height: 24px;
  }
  
  /* States */
  &--unchecked {
    background-color: var(--dyn-color-background);
    border-color: var(--dyn-color-border);
  }
  
  &--checked {
    background-color: var(--dyn-color-primary-600);
    border-color: var(--dyn-color-primary-600);
  }
  
  &--indeterminate {
    background-color: var(--dyn-color-primary-600);
    border-color: var(--dyn-color-primary-600);
  }
  
  &--loading {
    background-color: var(--dyn-color-background-subtle);
    border-color: var(--dyn-color-border);
  }
  
  /* Hover states */
  .dyn-checkbox:not(.dyn-checkbox--disabled):not(.dyn-checkbox--readonly):hover &--unchecked {
    border-color: var(--dyn-color-primary-600);
  }
  
  .dyn-checkbox:not(.dyn-checkbox--disabled):not(.dyn-checkbox--readonly):hover &--checked,
  .dyn-checkbox:not(.dyn-checkbox--disabled):not(.dyn-checkbox--readonly):hover &--indeterminate {
    background-color: var(--dyn-color-primary-700);
    border-color: var(--dyn-color-primary-700);
  }
}

/* Icons inside checkbox */
.dyn-checkbox__box svg {
  width: 12px;
  height: 12px;
  
  .dyn-checkbox__box--sm & {
    width: 10px;
    height: 10px;
  }
  
  .dyn-checkbox__box--lg & {
    width: 14px;
    height: 14px;
  }
}

.dyn-checkbox__loading {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
}

.dyn-checkbox__loading-spinner {
  animation: dyn-spin 1s linear infinite;
}

.dyn-checkbox__loading-circle {
  stroke-dasharray: 31.416;
  stroke-dashoffset: 31.416;
  animation: dyn-checkbox-loading 1.5s ease-in-out infinite;
}

@keyframes dyn-checkbox-loading {
  0% {
    stroke-dashoffset: 31.416;
  }
  50% {
    stroke-dashoffset: 0;
  }
  100% {
    stroke-dashoffset: -31.416;
  }
}

.dyn-checkbox__label {
  color: var(--dyn-color-text-primary);
  line-height: var(--dyn-line-height-normal);
  
  .dyn-checkbox--disabled & {
    color: var(--dyn-color-text-disabled);
  }
}

.dyn-checkbox__required-indicator {
  color: var(--dyn-color-danger-600);
  margin-left: var(--dyn-spacing-1);
  font-weight: var(--dyn-font-weight-bold);
}

/* Error states integration with field container */
.dyn-checkbox--error .dyn-checkbox__box {
  border-color: var(--dyn-color-danger-500);
  
  &--checked,
  &--indeterminate {
    background-color: var(--dyn-color-danger-500);
  }
}

.dyn-checkbox--warning .dyn-checkbox__box {
  border-color: var(--dyn-color-warning-500);
  
  &--checked,
  &--indeterminate {
    background-color: var(--dyn-color-warning-500);
  }
}

.dyn-checkbox--success .dyn-checkbox__box {
  border-color: var(--dyn-color-success-500);
  
  &--checked,
  &--indeterminate {
    background-color: var(--dyn-color-success-500);
  }
}

/* High contrast mode */
@media (prefers-contrast: high) {
  .dyn-checkbox__box {
    border-width: 3px;
  }
  
  .dyn-checkbox__input:focus + .dyn-checkbox__box {
    outline: 2px solid var(--dyn-color-focus-ring);
    outline-offset: 2px;
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .dyn-checkbox__box,
  .dyn-checkbox__loading-spinner,
  .dyn-checkbox__loading-circle {
    animation: none;
    transition: none;
  }
}